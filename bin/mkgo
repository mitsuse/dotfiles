#!/bin/bash

if [ "${#}" -ne 1 ]; then
    echo "usage: mkgo package_name"
    echo
    exit 1
fi

PACKAGE_NAME="${1}"
PACKAGE_BASE_NAME="$(basename ${PACKAGE_NAME})"

PACKAGE_DIR_PATH="${GOPATH}/src/${PACKAGE_NAME}"
mkdir -p "${PACKAGE_DIR_PATH}"
if [ "$?" -ne 0 ]; then
    exit 1
fi

PROJECT_DIR_PATH="${HOME}/projects/${PACKAGE_BASE_NAME}"
mkdir -p "${PROJECT_DIR_PATH}"
if [ "$?" -ne 0 ]; then
    exit 1
fi

if [ -e "${PROJECT_DIR_PATH}/repo" ]; then
    echo "File or direcotry has already exist: ${PROJECT_DIR_PATH}/repo"
    echo
    exit 1
fi

ln -s "${PACKAGE_DIR_PATH}" "${PROJECT_DIR_PATH}/repo"
if [ "$?" -ne 0 ]; then
    exit 1
fi
